import{r as n,j as e}from"./index-eRhLiy33.js";import{e as b}from"./vendor-utils-DfBlkqaH.js";import"./vendor-react-Csw2ODfV.js";const j="/hayami/assets/ding-BloplqBE.mp3",x="/hayami/assets/chord-Cs71Xf81.mp3",M={name:{min:2,max:50,errorMessages:{tooShort:"Name must be at least 2 characters long.",tooLong:"Name must not exceed 50 characters."}},email:{max:100,pattern:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,errorMessages:{invalid:"Please enter a valid email address.",tooLong:"Email must not exceed 100 characters."}},message:{min:10,max:500,errorMessages:{tooShort:"Message must be at least 10 characters long.",tooLong:"Message must not exceed 500 characters."}}},d=m=>new Audio(m).play().catch(l=>{console.error("Error playing sound:",l)}),S=()=>{const m=n.useRef(),[o,l]=n.useState(""),[r,i]=n.useState({name:"",email:"",message:""}),[g,c]=n.useState(!1),u=n.useCallback((t,s)=>{const a=M[t];if(!a)return"";if(t==="name"||t==="message"){if(s.length<a.min)return a.errorMessages.tooShort;if(s.length>a.max)return a.errorMessages.tooLong}if(t==="email"){if(!a.pattern.test(s))return a.errorMessages.invalid;if(s.length>a.max)return a.errorMessages.tooLong}return""},[]),h=n.useCallback(t=>{const s={name:u("name",t.name),email:u("email",t.email),message:u("message",t.message)};return i(s),!s.name&&!s.email&&!s.message},[u]),p=n.useCallback(async t=>{if(t.preventDefault(),!m.current)return;const s={name:m.current.user_name.value,email:m.current.user_email.value,message:m.current.message.value};if(i({name:"",email:"",message:""}),!h(s)){await d(x);return}c(!0);try{const a={...s,user_email:s.email,to_email:"YOUR_EMAIL_ADDRESS",time:new Date().toLocaleString("en-US",{timeZone:"Asia/Ho_Chi_Minh"})};await b.send("service_2c1qc15","template_cl4syyp",a,"9wlh_6KE03XCPE4jh"),l("Message sent successfully!"),m.current.reset(),await d(j)}catch(a){l(`Failed to send message: ${a.text||a.message}`),await d(x)}finally{c(!1)}},[h]),f=n.useCallback(()=>{if(!(o||r.name||r.email||r.message))return;const s=setTimeout(()=>{l(""),i({name:"",email:"",message:""})},5e3);return()=>clearTimeout(s)},[o,r]);return{formRef:m,status:o,errors:r,isSending:g,sendEmail:p,clearMessages:f}},N=n.memo(({onClose:m})=>{const{formRef:o,status:l,errors:r,isSending:i,sendEmail:g,clearMessages:c}=S();return n.useEffect(()=>c(),[c]),e.jsx("div",{className:"message-me-window",children:e.jsxs("form",{ref:o,onSubmit:g,className:"form",children:[e.jsxs("div",{className:"label-error-container",children:[e.jsx("label",{className:"label",children:"Name:"}),r.name&&e.jsx("span",{className:"error-message",children:r.name})]}),e.jsx("input",{type:"text",name:"user_name",className:"input",required:!0}),e.jsxs("div",{className:"label-error-container",children:[e.jsx("label",{className:"label",children:"Email:"}),r.email&&e.jsx("span",{className:"error-message",children:r.email})]}),e.jsx("input",{type:"email",name:"user_email",className:"input",required:!0}),e.jsxs("div",{className:"label-error-container",children:[e.jsx("label",{className:"label",children:"Message:"}),r.message&&e.jsx("span",{className:"error-message",children:r.message})]}),e.jsx("textarea",{name:"message",className:"input textarea retro-scrollbar",required:!0}),e.jsxs("div",{className:"button-status-container",children:[e.jsx("button",{type:"submit",className:"window-button program-button",disabled:i,children:"Send"}),l&&e.jsx("p",{className:"status-message",children:l})]})]})})});N.displayName="Message";export{N as default};
